<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <style>
    html,body { height:100%; margin:0; background:#131722; }
    .tradingview-widget-container { height:100%; width:100%; }
  </style>
</head>
<body>
  <div class="tradingview-widget-container">
    <div id="tradingview_chart" style="height:100%; width:100%;"></div>
  </div>

  <script>
    // ðŸ§© Dynamically get symbol from URL (?symbol=...)
    function getQueryParam(name) {
      const params = new URLSearchParams(window.location.search);
      return params.get(name);
    }

    const symbol = getQueryParam("symbol") || "NSE:NIFTY"; // default fallback

    // ðŸ§  TradingView widget configuration
    const widgetConfig = {
      "autosize": true,
      "symbol": symbol,
      "interval": "60",
      "timezone": "exchange",
      "theme": "dark",
      "style": "1",
      "toolbar_bg": "#131722",
      "hide_top_toolbar": false,
      "save_image": false,
      "container_id": "tradingview_chart"
    };

    // Inject widget script dynamically
    const script = document.createElement('script');
    script.type = 'text/javascript';
    script.async = true;
    script.src = 'https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js';
    script.innerHTML = JSON.stringify(widgetConfig);
    document.querySelector('.tradingview-widget-container').appendChild(script);
  </script>
</body>
</html>
